<!-- HEADER CON MEN√ö -->
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a routerLink="/" class="logo">
        üíç Enredados
      </a>
    </div>

    <div class="navbar-menu">
      <a routerLink="/servicios">Servicios</a>
      <a routerLink="/mi-boda" *ngIf="authService.isLoggedIn()">Mi Boda</a>
      
      <!-- Usuario autenticado -->
      <div class="user-menu" *ngIf="authService.isLoggedIn()">
        <button class="user-button">
          üë§ {{ authService.getUsername() }}
        </button>
        <div class="user-dropdown">
          <a routerLink="/perfil">Mi Perfil</a>
          <a href="#" (click)="logout()">Cerrar Sesi√≥n</a>
        </div>
      </div>

      <!-- Botones de login/registro -->
      <div class="auth-buttons" *ngIf="!authService.isLoggedIn()">
        <a routerLink="/login" class="btn-login">Iniciar Sesi√≥n</a>
        <a routerLink="/registro" class="btn-register">Registrarse</a>
      </div>
    </div>
  </nav>
</header>

<!-- HERO SECTION -->
<section class="hero">
  <div class="hero-content">
    <h1 class="hero-title">Organiza la boda de tus sue√±os</h1>
    <p class="hero-subtitle">
      Encuentra los mejores proveedores para tu d√≠a especial en un solo lugar
    </p>

    <!-- BUSCADOR -->
    <div class="search-box">
      <input 
        type="text" 
        [(ngModel)]="terminoBusqueda"
        placeholder="¬øQu√© necesitas para tu boda?"
        class="search-input"
        (keyup.enter)="buscarServicios()"
      />
      
      <select 
        [(ngModel)]="categoriaSeleccionada"
        class="search-select"
      >
        <option value="">Todas las categor√≠as</option>
        <option *ngFor="let cat of categorias" [value]="cat.id">
          {{ cat.nombre }}
        </option>
      </select>

      <button class="search-button" (click)="buscarServicios()">
        üîç Buscar
      </button>
    </div>
  </div>

  <div class="hero-image">
    <img src="https://images.unsplash.com/photo-1519741497674-611481863552?w=800&auto=format&fit=crop" alt="Boda" />
  </div>
</section>

<!-- CATEGOR√çAS DESTACADAS -->
<section class="categorias-section">
  <div class="container">
    <h2 class="section-title">Explora por Categor√≠a</h2>
    <p class="section-subtitle">Encuentra exactamente lo que necesitas</p>

    <div class="categorias-grid">
      <div 
        *ngFor="let cat of categoriasDestacadas" 
        class="categoria-card"
        [style.background]="'linear-gradient(135deg, ' + cat.color + ' 0%, ' + cat.color + 'dd 100%)'"
        (click)="filtrarPorCategoria(cat.nombre)"
      >
        <div class="categoria-icono">{{ cat.icono }}</div>
        <h3>{{ cat.nombre }}</h3>
        <p>{{ cat.descripcion }}</p>
      </div>
    </div>
  </div>
</section>

<!-- SERVICIOS DESTACADOS -->
<section class="servicios-destacados">
  <div class="container">
    <h2 class="section-title">Servicios Destacados</h2>
    <p class="section-subtitle">Los proveedores m√°s populares de nuestra plataforma</p>

    <div class="loading" *ngIf="cargando">
      <p>Cargando servicios...</p>
    </div>

    <div class="servicios-grid" *ngIf="!cargando">
      <div 
        *ngFor="let servicio of serviciosDestacados" 
        class="servicio-card"
        [routerLink]="['/servicio', servicio.id]"
      >
        <div class="servicio-imagen">
          <img 
            [src]="servicio.imagen || 'https://images.unsplash.com/photo-1511285560929-80b456fea0bc?w=400&auto=format&fit=crop'" 
            [alt]="servicio.nombre"
          />
          <span class="servicio-categoria">{{ servicio.categoria_nombre }}</span>
        </div>
        
        <div class="servicio-contenido">
          <h3>{{ servicio.nombre }}</h3>
          <p class="servicio-proveedor">üè¢ {{ servicio.proveedor_nombre }}</p>
          <p class="servicio-descripcion">{{ servicio.descripcion }}</p>
          
          <div class="servicio-footer">
            <span class="servicio-precio">{{ servicio.precio }}‚Ç¨</span>
            <span class="servicio-disponible" [class.no-disponible]="!servicio.disponible">
              {{ servicio.disponible ? '‚úÖ Disponible' : '‚ùå No disponible' }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <div class="text-center">
      <button class="btn-ver-mas" routerLink="/servicios">
        Ver Todos los Servicios ‚Üí
      </button>
    </div>
  </div>
</section>

<!-- VALORACIONES RECIENTES -->
<section class="valoraciones-section" *ngIf="valoracionesRecientes.length > 0">
  <div class="container">
    <h2 class="section-title">Lo que dicen nuestros usuarios</h2>
    <p class="section-subtitle">Opiniones reales de bodas reales</p>

    <div class="valoraciones-grid">
      <div *ngFor="let val of valoracionesRecientes" class="valoracion-card">
        <div class="valoracion-estrellas">
          <span *ngFor="let star of generarEstrellas(val.puntuacion)" class="estrella">
            {{ star }}
          </span>
        </div>
        <p class="valoracion-comentario">"{{ val.comentario }}"</p>
        <div class="valoracion-autor">
          <strong>{{ val.usuario_nombre }}</strong>
          <span>{{ val.servicio_nombre }}</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- CTA SECTION -->
<section class="cta-section">
  <div class="container">
    <div class="cta-content">
      <h2>¬øListo para organizar tu boda perfecta?</h2>
      <p>√önete a miles de parejas que ya conf√≠an en Enredados</p>
      <div class="cta-buttons">
        <button class="btn-primary" routerLink="/registro" *ngIf="!authService.isLoggedIn()">
          Comenzar Ahora - Es Gratis
        </button>
        <button class="btn-primary" routerLink="/servicios" *ngIf="authService.isLoggedIn()">
          Explorar Servicios
        </button>
        <button class="btn-secondary" routerLink="/servicios">
          Ver Proveedores
        </button>
      </div>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer class="footer">
  <div class="container">
    <div class="footer-grid">
      <div class="footer-column">
        <h3>üíç Enredados</h3>
        <p>La plataforma definitiva para organizar tu boda perfecta</p>
      </div>

      <div class="footer-column">
        <h4>Servicios</h4>
        <a routerLink="/servicios">Todos los Servicios</a>
        <a href="#">Proveedores</a>
        <a href="#">Lugares de Boda</a>
      </div>

      <div class="footer-column">
        <h4>Mi Cuenta</h4>
        <a routerLink="/login" *ngIf="!authService.isLoggedIn()">Iniciar Sesi√≥n</a>
        <a routerLink="/registro" *ngIf="!authService.isLoggedIn()">Registrarse</a>
        <a routerLink="/perfil" *ngIf="authService.isLoggedIn()">Mi Perfil</a>
        <a routerLink="/mi-boda" *ngIf="authService.isLoggedIn()">Mi Boda</a>
      </div>

      <div class="footer-column">
        <h4>Legal</h4>
        <a href="#">T√©rminos y Condiciones</a>
        <a href="#">Pol√≠tica de Privacidad</a>
        <a href="#">Contacto</a>
      </div>
    </div>

    <div class="footer-bottom">
      <p>&copy; 2025 Enredados - Todos los derechos reservados</p>
      <p>Proyecto DAM - Javier M√©ndez Oves</p>
    </div>
  </div>
</footer>